<?xml version="1.0" encoding="UTF-8"?>

<queries>
    <!--- 记住表的最后不能加分号（;）,否则spark程序会抛出异常 -->
    <!--- 不用添加DROP TABLE IF EXISTS table，程序代码会自动执行 -->
    <hql schema="dw" tableName="dim_tcms_city" discription="城市维度表">
        CREATE TABLE IF NOT EXISTS dw.dim_tcms_city (
          city_id int,
          city_country_code string,
          city_state_code string,
          city_enname string,
          city_cnname string,
          city_tms_id int,
          city_last_update_time timestamp
        ) COMMENT '城市维度表'
        STORED AS PARQUET TBLPROPERTIES('parquet.compression'='SNAPPY')
    </hql>

    <hql schema="dw" tableName="dim_tcms_customer" discription="客户维度表">
        CREATE TABLE IF NOT EXISTS dw.dim_tcms_customer (
          og_key bigint,
          customer_id int,
          customer_code string,
          customer_shortname string,
          customer_allname string,
          customer_customerstatus_code string,
          customer_customerlevel_code string,
          customer_customertype_code string,
          customer_customersource_code string COMMENT '客户介绍人类型代码，S内部介绍、C自行寻找 、P平台介绍',
          customer_customersource_code_val string,
          customer_settlementtypes_code string COMMENT '结算模式，M月结，W周结',
          customer_settlementtypes_code_val string,
          customer_createdate timestamp,
          customer_createrid int,
          customer_server_status string,
          customer_og_id int,
          customer_tms_id int,
          customer_start_time timestamp,
          customer_sameday_time timestamp COMMENT '当天客户走货时间',
          customer_owe_intercept string COMMENT '欠费拦截字段（对应值 Y,是欠费拦截，N 否）',
          customer_owe_intercept_val string,
          customer_owe_type string COMMENT '欠费类型（YE 余额模式、ZQ 账期模式）',
          customer_owe_type_val string,
          customer_owe_intercept_date timestamp COMMENT '欠费放行最后日期',
          customer_pcs_code string COMMENT '客户来源,对应xtd_potentialcustomersource.pcs_code',
          customer_last_update_time timestamp,
          customer_orderreturnhandledays string COMMENT '原件退回处理天数',
          customer_pickuppieces int COMMENT '自提件最少件数',
          customer_orderabnormalhandledays int COMMENT '异常件处理天数',
          customer_billcompany_id int COMMENT '账单主体ID',
          customer_bill_format int COMMENT '账单格式'
        ) COMMENT '客户维度表'
        STORED AS PARQUET TBLPROPERTIES('parquet.compression'='SNAPPY')
    </hql>

    <hql schema="dw" tableName="dim_tcms_product" discription="产品维度表">
        CREATE TABLE IF NOT EXISTS dw.dim_tcms_product (
          product_code string,
          product_cnname string COMMENT '中文名称',
          product_enname string COMMENT '英文名称',
          product_productgroup_code string COMMENT '产品组，表示本产品属于何种业务，例如小包单票、出口快件类等',
          product_currency_code string COMMENT '设置收费币种',
          product_status string COMMENT '生效状态，Y为生效、N为失效',
          product_status_val string,
          product_trackstatus string COMMENT '是否可跟踪(TRACK)，N为不可跟踪、Y为可跟踪',
          product_trackstatus_val string,
          product_aging string COMMENT '派送时效',
          product_note string COMMENT '网站备注',
          product_tms_id int,
          product_print_sign string COMMENT '标签打印标记',
          product_test_sort int COMMENT '运费试算排序权重, 数值越大排在上面',
          product_carrier_name string COMMENT '平台承运商',
          product_operational_difficulty decimal(12,2) COMMENT '操作难度系数',
          product_package_weight decimal(12,2) COMMENT '包材重',
          product_audit_sku_sign string COMMENT '是否需检查SKU报关审核标志，Y为校验，N为不校验',
          product_audit_sku_sign_val string,
          product_ispanasonicunit string COMMENT '是否为国际件 Y为是 N为否',
          product_ispanasonicunit_val string,
          product_last_update_time timestamp,
          product_isvirtual int COMMENT '是否是虚拟海外仓 1为是 0为否',
          product_isvirtual_val string,
          product_original_server_code string COMMENT '原服务商代码',
          product_original_server_channelid int COMMENT '原服务渠道ID',

          product_productgroup_cnname string,
          product_productgroup_enname string,
          product_productgroup_note string,
          product_productgroup_hawbrule string COMMENT '服务商单号规则样例表',
          product_productgroup_last_update_time timestamp
        ) COMMENT '产品维度表'
        STORED AS PARQUET TBLPROPERTIES('parquet.compression'='SNAPPY')
    </hql>


    <hql schema="dw" tableName="dim_tcms_issue_type" discription="客户问题管理配置维度表表">
        CREATE TABLE IF NOT EXISTS dw.dim_tcms_issue_type (
          issue_type_tms_id int COMMENT '系统ID',
          issue_type_issuekind_code string COMMENT '问题种类代码',
          issue_type_issuekind_cnname string COMMENT '问题标题，用于网站客户显示与问题管理中显示',
          issue_type_issuekind_content string COMMENT '问题内容模板',
          issue_type_isu_interactionsign string COMMENT '网站处理类型，一般为可回复，不可回复和可网上放行',
          issue_type_issue_enable string COMMENT '是否可用 Y可用 N不可用',
          issue_type_issue_enable_val string,
          issue_type_issue_class_code string COMMENT '问题紧急等级',
          issue_type_issuekind_mnemonic string,
          issue_type_issuekind_link string COMMENT '问题类型环节，比如签入，录单等， 多个环节用逗号分割，',
          issue_type_last_update_time timestamp
        ) COMMENT '客户问题管理配置表'
        STORED AS PARQUET TBLPROPERTIES('parquet.compression'='SNAPPY')
    </hql>

    <hql schema="dw" tableName="dim_employee" discription="员工维度表">
        CREATE TABLE IF NOT EXISTS dw.dim_employee (
          ed_key bigint,
          ep_key bigint,
          employee_id int,
          employee_code string,
          employee_company_code string,
          employee_is_admin tinyint,
          employee_password string,
          employee_name string,
          employee_name_en string,
          employee_status tinyint,
          employee_status_val string,
          employee_email string,
          employee_email_verify tinyint,
          employee_ud_id int,
          employee_up_id int,
          employee_password_update_time timestamp,
          employee_phone string,
          employee_mobile_phone string,
          employee_note string,
          employee_supervisor_id int,
          employee_add_time timestamp,
          employee_last_login timestamp,
          employee_update_time timestamp,
          employee_activate_code string,
          employee_is_index_show tinyint,
          employee_versions timestamp,
          employee_p_id int,
          employee_ez_user_id int,
          employee_priority_login string
        ) COMMENT '员工维度表'
        STORED AS PARQUET TBLPROPERTIES('parquet.compression'='SNAPPY')
    </hql>

    <!--- wms 维度表  hyy -->
    <hql schema="dw" tableName="dim_warehouse" discription="仓库维度表">
        CREATE TABLE if NOT EXISTS dw.dim_warehouse(
        warehouse_id int comment '仓库ID',
        warehouse_code string comment '仓库编号',
        warehouse_desc string comment '仓库名称',
        warehouse_type tinyint comment '参考类型',
        warehouse_type_val string comment '参考类型说明',
        warehouse_status tinyint comment '仓库状态',
        warehouse_status_val string comment '仓库状态说明',
        warehouse_virtual tinyint comment '仓库运营方式(自营或者第三方)',
        warehouse_virtual_val string comment '仓库运营方式说明',
        warehouse_transfer tinyint comment '仓库中转状态(标准or中转)',
        warehouse_transfer_val string comment '仓库中转状态说明',
        warehouse_country_id int comment '仓库所属国家id',
        warehouse_country_code string comment '仓库所属国家编码',
        warehouse_state string comment '仓库所在州',
        warehouse_city string comment '仓库所在城市',
        warehouse_contacter string comment '仓库联系人',
        warehouse_company string comment '仓库所属公司',
        warehouse_phone_no string comment '仓库电话',
        warehouse_street_address1 string comment '仓库地址1',
        warehouse_street_address2 string comment '仓库地址2',
        warehouse_street_number string comment '仓库门牌号',
        warehouse_postcode string comment '仓库邮编',
        warehouse_proxy_code string comment '仓库代理人编号',
        warehouse_timezone int comment '时区',
        warehouse_is_value_added_tax tinyint comment '是否开启增值税审核 0 否 1是',
        warehouse_is_value_added_tax_val string comment '是否开启增值税审核的说明',
        warehouse_en string comment '仓库英文名字',
        warehouse_saving_time tinyint comment '令时: 1为夏令时,0为冬令时',
        warehouse_saving_time_val string comment '令时显示值说明',
        warehouse_arrival_days int comment '预计到达仓库的天数',
        warehouse_currency_code string comment '币种代码',
        warehouse_add_time timestamp,
        warehouse_update_time timestamp
        )COMMENT '仓库维度表'
        STORED AS PARQUET TBLPROPERTIES('parquet.compression'='SNAPPY')
    </hql>

    <hql schema="dw" tableName="dim_warehouse_physical" discription="物理仓维度表">
        CREATE TABLE if NOT EXISTS dw.dim_warehouse_physical(
        warehouse_key bigint,
        wp_id int comment '物理仓id',
        wp_warehouse_id int comment '关联仓库ID',
        wp_warehouse_code string comment '仓库编号(仓库)',
        wp_name string comment '物理仓名称',
        wp_code string comment '物理仓代码',
        wp_status tinyint comment '状态 0不可用 1可用',
        wp_status_val string comment '状态说明',
        wp_priority tinyint comment '出口优先级 最多2位数',
        wp_state string comment '州 省份',
        wp_city string comment '城市',
        wp_postcode string comment '邮编',
        wp_company string comment '公司名称',
        wp_contacter string comment '联系人',
        wp_phone string comment '电话',
        wp_street_address1 string comment '地址1',
        wp_street_address2 string comment '地址2',
        wp_street_number string comment '门牌号',
        wp_add_time timestamp,
        wp_update_time timestamp
        )COMMENT '物理仓维度表'
        STORED AS PARQUET TBLPROPERTIES('parquet.compression'='SNAPPY')
    </hql>

    <hql schema="dw" tableName="dim_warehouse_area" discription="仓库分区维度表">
        CREATE TABLE if NOT EXISTS dw.dim_warehouse_area(
        warehouse_key bigint,
        wa_id int comment '分区id',
        wa_code string comment '分区代码',
        wa_warehouse_id int comment '仓库ID',
        wa_warehouse_code string comment '仓库编号',
        wa_wp_code string comment '物理仓代码',
        wa_name string comment '分区名称',
        wa_name_en string comment '分区英文名',
        wa_type tinyint comment '分区类型',
        wa_type_val string comment '分区类型说明',
        wa_pc_id int,
        wa_status tinyint comment '分区状态',
        wa_status_val string comment '分区状态说明',
        wa_sort tinyint comment '预下架顺序,拣货顺序，1优先级最高',
        wa_add_time timestamp,
        wa_update_time timestamp
        )COMMENT '仓库分区维度表'
        STORED AS PARQUET TBLPROPERTIES('parquet.compression'='SNAPPY')
    </hql>

    <hql schema="dw" tableName="dim_warehouse_location" discription="库位维度表">
        CREATE TABLE if NOT EXISTS dw.dim_warehouse_location(
        warehouse_key bigint,
        wa_key bigint,
        wlc_id int comment '库位id',
        wlc_code string comment '库存代码',
        wlc_note string comment '库存通知',
        wlc_status tinyint comment '库位状态 1 可用 (0,-1)已废弃',
        wlc_status_val string comment '库位状态说明',
        wlc_warehouse_id int comment '关联仓库id',
        wlc_warehouse_code string comment '关联仓库编号',
        wlc_wa_code string comment '关联仓库分区编号',
        wlc_lt_id int comment '库位类型ID',
        wlc_lt_code string comment '库位类型编号',
        wlc_lt_description string comment '库位类型描述',
        wlc_lt_width decimal(8,2) comment '库位类型长度',
        wlc_lt_length decimal(8,2) comment '库位类型宽度',
        wlc_lt_height decimal(8,2) comment '库位类型高度',
        wlc_lt_vol decimal(14,2) comment '库位类型体积',
        wlc_lock tinyint comment '库位位置',
        wlc_sort int comment '库位顺序',
        wlc_pick_point int comment '取点位置',
        wlc_pick_sort int comment '取点顺序',
        wlc_contain_battery tinyint comment '货物属性 0普货，1含电，2纯电，3无限制',
        wlc_contain_battery_val string comment '货物属性说明',
        wlc_putaway_sort int comment '上架顺序',
        wlc_is_mixed tinyint comment '是否混放 0否 1是',
        wlc_is_mixed_val string comment '是否混放说明',
        wlc_is_multiple_batch tinyint comment '是否多批次 0否 1是',
        wlc_is_multiple_batch_val string comment '是否多批次说明',
        wlc_max_weight int comment '最大承重 0不限制 单位和产品一样KG',
        wlc_max_sku_type int comment '最大sku种类 0不限制',
        wlc_add_time timestamp,
        wlc_update_time timestamp
        )COMMENT '库位维度表'
        STORED AS PARQUET TBLPROPERTIES('parquet.compression'='SNAPPY')
    </hql>

    <hql schema="dw" tableName="dim_currency" discription="币种维度表">
        CREATE TABLE if NOT EXISTS dw.dim_currency(
        currency_id int    comment '货币id',
        currency_name_en string    comment '货币英文名',
        currency_name string    comment '货币中文名',
        currency_code string    comment '货币编码',
        currency_is_local tinyint    comment '是否当地货币',
        currency_is_local_val string    comment '是否当地货币说明',
        currency_symbol_left string    comment '左侧货币符号',
        currency_symbol_right string    comment '右侧货币符号',
        currency_decimal_point string    comment '货币小数点符号',
        currency_thousands_point string    comment '货币千分位符号',
        currency_decimal_places int    comment '货币小数位位置',
        currency_hs_code string    comment '历史货币编号',
        currency_official_rate decimal(8,4)    comment '货币官方汇率',
        currency_rate decimal(8,4)    comment '货币汇率',
        currency_rmb_buy decimal(11,4)    comment '人民币买入价格',
        currency_rmb_sales decimal(11,4)    comment '人民币卖出价格',
        currency_update_time timestamp
        )COMMENT '币种维度表'
        STORED AS PARQUET TBLPROPERTIES('parquet.compression'='SNAPPY')
    </hql>

    <hql schema="dw" tableName="dim_country" discription="国家维度表">
        CREATE TABLE if NOT EXISTS dw.dim_country(
        country_id Int comment '国家id',
        country_name String comment '国家名称',
        country_name_en String comment '国家英文名',
        country_local_name String comment '国家当地名称',
        country_alias String comment '国家别名',
        country_code String comment '国家编号',
        country_sort Int comment '国家排序',
        country_short_name String comment '国家简称',
        country_trade_country String comment '贸易国家',
        country_num String comment '国家number',
        country_zipcode_substring_length Int comment '邮政编码',
        country_cellphone_area_code Int comment '区号'
        )COMMENT '国家维度表'
        STORED AS PARQUET TBLPROPERTIES('parquet.compression'='SNAPPY')
    </hql>

    <hql schema="dw" tableName="par_currency_rate" discription="币种费率配置表">
        CREATE TABLE if NOT EXISTS dw.par_currency_rate(
        cr_datekey string comment '货币日期',
        cr_currency_code string comment '货币代码',
        cr_currency_rate decimal(18,4) comment '货币汇率',
        cr_former_currency_rate decimal(18,4) comment '原先货币汇率',
        cr_user_id int comment '维护人id',
        cr_add_time timestamp comment '新增时间',
        cr_end_time timestamp comment '结束时间',
        w_insert_dt timestamp,
        w_update_dt timestamp
        )COMMENT '币种费率配置表,每日更新一次'
        STORED AS PARQUET TBLPROPERTIES('parquet.compression'='SNAPPY')
    </hql>

    <!--gc_wms_fee_type zy_wms_fee_type-->
    <hql schema="dw" tableName="dim_fee_type" discription="费用类型维度表">
        CREATE TABLE IF NOT EXISTS dw.dim_fee_type (
          ft_id int,
          ft_code string,
          ft_name_en string,
          ft_name_cn string,
          ft_note string,
          ft_type int COMMENT '1:操作费 2:物流杂费 3:物流特殊费用 4:应收',
          ft_type_val string,
          ft_add_time timestamp,
          ft_update_time timestamp
        ) COMMENT '费用类型维度表'
        STORED AS PARQUET TBLPROPERTIES('parquet.compression'='SNAPPY')
    </hql>

    <hql schema="dw" tableName="dim_tcms_fee_type" discription="费用类型维度表">
        CREATE TABLE IF NOT EXISTS dw.dim_tcms_fee_type (
          ft_fk_id int COMMENT 'ft_id',
          ft_tms_id int COMMENT '系统ID',
          ft_fk_code string COMMENT '费用代码',
          ft_fk_name string COMMENT '中文名称',
          ft_fk_ename string COMMENT '英文名称',
          ft_fk_note string COMMENT '备注',
          ft_fk_type string COMMENT '费用类型.  Y:表示燃油费',
          ft_fk_type_val string COMMENT '',
          ft_group_id int COMMENT '分组ID',
          ft_last_update_time timestamp COMMENT 'gc_tcms_xtd_customer_feekind的时间戳',
          ft_serverbill_printed string COMMENT '对应服务商对账单详情列',
          ft_group_code string COMMENT '费用代码',
          ft_group_name string COMMENT '中文名称',
          ft_group_ename string COMMENT '英文名称',
          ft_group_remark string COMMENT '备注',
          ft_group_tms_id int COMMENT '系统ID',
          ft_group_last_update_time timestamp COMMENT 'gc_tcms_xtd_customer_feekind_group的最后修改时间'
        ) COMMENT '费用类型维度表'
        STORED AS PARQUET TBLPROPERTIES('parquet.compression'='SNAPPY')
    </hql>

    <hql schema="dw" tableName="dim_tcms_country" discription="tcms国家表">
        CREATE TABLE if not exists dw.dim_tcms_country(
          country_code string,
          country_cnname string,
          country_enname string,
          country_three_code string,
          country_number string,
          country_last_update_time timestamp
        )
        STORED AS PARQUET TBLPROPERTIES('parquet.compression'='SNAPPY');
    </hql>

    <hql schema="dw" tableName="dim_tcms_employee" discription="tcms员工表">
        CREATE TABLE IF NOT EXISTS dw.dim_tcms_employee (
          employee_st_id int COMMENT '员工ID，每个员工为唯一值，在职期间不变。',
          employee_st_code string COMMENT '工号。系统内部保持唯一，一般不变动',
          employee_vs_code string COMMENT '员工在职状态代码',
          employee_og_id int COMMENT '员工所属组织机构ID',
          employee_competence_og_id int,
          employee_st_name string COMMENT '员工姓名',
          employee_st_ename string COMMENT '员工英文姓名',
          employee_ur_loginpassword string COMMENT '用户密码',
          employee_sp_id int COMMENT '岗位ID',
          employee_st_id_ctreate int COMMENT '创建人ID',
          employee_tms_id int COMMENT '系统ID',
          employee_error_count int COMMENT '验证码错误次数（超过五次则需等待3小时）',
          employee_last_obtain_time timestamp COMMENT '下次获取验证码时间',
          employee_last_update_time timestamp
        ) COMMENT 'tcms员工维度表'
        STORED AS PARQUET TBLPROPERTIES('parquet.compression'='SNAPPY')
    </hql>

</queries>

